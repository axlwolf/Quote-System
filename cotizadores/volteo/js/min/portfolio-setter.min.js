!function(i){i.fn.portfolioSetter=function(t){function e(){w.parent().append('<div class="loading"></div>'),a()}function a(){i.ajax({type:"GET",url:t.xmlSource,dataType:"xml",success:function(e){"off"===i(e).find("show_categories:first").text()&&(t.showCategories=!1),t.showCategories&&i(e).find("categories").eq(0).find("category").each(function(){var t=i(this),e={id:t.attr("id"),name:t.text()};h.push(e)}),i(e).find("item").each(function(){var e=i(this),a=e.find("thumbnail:first").text(),n=e.find("preview:first").text(),o=e.find("category:first").text().split(","),s=e.find("description:first").text(),r={thumbnail:a,preview:n,category:o,description:s,obj:i('<div class="'+t.itemClass+'"><a rel="lightbox['+_+']" class="single_image" href="'+n+'" title="'+s+'"><img src="'+a+'" /></a></div>')};g.push(r)}),n()}})}function n(){i.browser.msie&&(b=!0),w.siblings(".loading").remove(),w.after('<div id="'+t.navigationId+'"><ul></ul></div>'),t.showCategories&&o(),r()}function o(){p=i('<div id="'+t.categoriesId+'"></div>'),p.append('<div id="portfolio_categories_left"></div><ul></ul><div id="portfolio_categories_right"></div>'),w.before(p);var e=p.find("ul"),a=i("<li>"+t.allText+"</li>");e.append(a),s(a),a.bind({click:function(){d(),s(i(this))},mouseover:function(){i(this).css({cursor:"pointer"})}});for(var n=h.length,o=0;n>o;o++)(function(t){var a=i("<li>"+h[t].name+"</li>");e.append(a),a.bind({click:function(){d(h[t].id),s(i(this))},mouseover:function(){i(this).css({cursor:"pointer"})}})})(o)}function s(i){var t=p.find("ul li.selected");if(t[0]){var e=t.find("div.port_cat").html();t.html(e),t.removeClass("selected")}var a=i.html();i.html('<div class="port_cat_active"><div class="port_cat_l"></div><div class="port_cat">'+a+'</div><div class="port_cat_r"></div> </div>'),i.addClass("selected")}function r(){var t=g.length;for(var e in g)if(g.hasOwnProperty(e)){var a=new Image;i(a).load(function(){u++,u===t&&d()}).attr("src",g[e].thumbnail)}}function d(){var e=0===arguments.length?!1:!0;w.html(""),w.width(200),v=[],w.animate({marginLeft:0});var a=g.length;m=0;for(var n=arguments[0],o=0;a>o;o++)(function(e,a,n){if(!a||a&&g[e].category.contains(n)){if(m%t.itemsPerPage===0){w.width(w.width()+t.pageWidth+20);var o=i('<div class="'+t.pageWrapperClass+'"></div>').css({"float":"left",width:t.pageWidth+t.itemMargin,height:t.pageHeight});v.push(o),w.append(o)}if(b){var s=i('<div class="'+t.itemClass+'" ><a rel="lightbox['+_+']" class="single_image" href="'+g[e].preview+'" title="'+g[e].description+'"><img src="'+g[e].thumbnail+'" /></a></div>');v[v.length-1].append(s.css({display:"none"})),g[e].obj=s}else v[v.length-1].append(g[e].obj.css({display:"none"}));{m>=t.itemsPerPage?0:100}m>=t.itemsPerPage||!t.wavyAnimation?g[e].obj.fadeIn().animate({opacity:1},0):setTimeout(function(){g[e].obj.fadeIn().animate({opacity:1},0)},100*m),m++}})(o,e,n);i('a[rel="lightbox['+_+']"]').prettyPhoto({theme:"dark_rounded",keyboard_shortcuts:!1}),l(),c()}function l(){var e=w.siblings("#"+t.navigationId).find("ul");e.html("");var a=v.length;if(a>1){for(var n=0;a>n;n++)(function(a){var n=i("<li></li>");e.append(n),n.bind({click:function(){var n=a*t.pageWidth+a*t.itemMargin-2;i.browser.msie&&i.browser.version.substr(0,1)<7&&(n+=a*t.itemMargin),w.animate({marginLeft:[-n,t.easing]},t.animationSpeed),e.find("li.selected").removeClass("selected"),i(this).addClass("selected")},mouseover:function(){i(this).css({cursor:"pointer"})}})})(n);e.find("li:first").addClass("selected");var o=t.pageWidth/2-a*t.navButtonWidth/2;e.css({marginLeft:o})}}function c(){i(".portfolio_item").hover(function(){i(this).stop().animate({opacity:.8},300)},function(){i(this).stop().animate({opacity:1},300)})}var f={itemsPerPage:12,pageWidth:960,pageHeight:430,itemMargin:30,showCategories:!0,allText:"ALL",easing:"easeOutExpo",animationSpeed:800,navButtonWidth:21,wavyAnimation:!1,xmlSource:"portfolio.xml",pageWrapperClass:"page_wrapper",navigationId:"portfolio_pagination",categoriesId:"portfolio_categories",itemClass:"portfolio_item"},t=i.extend(f,t);t.pageHolder=i(this);var p,h=[],g=[],v=[],u=0,m=0,b=!1,w=i("<div />").css({width:2*t.pageWidth,height:t.pageHeight,"float":"left"});i(this).css({width:t.pageWidth,height:"auto",overflow:"hidden"}).append(w);var _=i(this).attr("id");e()}}(jQuery),Array.prototype.contains=function(i){for(var t=this.length,e=0;t>e;e++)if(this[e]===i)return!0;return!1};